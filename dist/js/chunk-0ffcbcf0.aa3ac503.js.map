{"version":3,"sources":["webpack:///./src/views/CouponCenter.vue?fd09","webpack:///./src/service/coupons.js","webpack:///./src/views/CouponCenter.vue?250f","webpack:///src/views/CouponCenter.vue","webpack:///./src/views/CouponCenter.vue?682c","webpack:///./src/views/CouponCenter.vue","webpack:///./src/assets/images/default/card.png"],"names":["getCoupons","data","service","get","getUserCoupons","postUserCoupons","post","getCouponsCourse","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","couponList","length","style","height","_v","_e","width","loadMoreCouponFn","onRefreshCouponFn","scopedSlots","_u","key","fn","proxy","staticStyle","_l","item","index","class","couponType","_s","_f","money","name","endTime","price","scope","accountMoney","on","$event","receiveCoupon","uuid","dueList","dueHeight","loadMoreDueFn","onRefreshDueFn","coupon","btnUseNow","target","staticRenderFns","methods","that","json","results","couponTotal","count","couponCurrentPage","dueTotal","dueCurrentPage","$router","push","map","done","mounted","component","module","exports"],"mappings":"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","file":"js/chunk-0ffcbcf0.aa3ac503.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CouponCenter.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CouponCenter.vue?vue&type=style&index=0&lang=scss&\"","import { service } from './http';\r\n\r\nconst getCoupons = (data) => service.get('/api/client/coupons/', data) //优惠券列表\r\nconst getUserCoupons = (data) => service.get('/api/client/userCoupons/', data) //用户优惠券列表\r\nconst postUserCoupons = (data) => service.post('/api/client/userCoupons/', data) //领用优惠券\r\nconst getCouponsCourse = (data) => service.get('/api/client/couponsCourse/', data) //品类券、通用券可用课程\r\n\r\nexport {\r\n  getCoupons,\r\n  getUserCoupons,\r\n  postUserCoupons,\r\n  getCouponsCourse\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page couponCenter\"},[_c('van-tabs',[_c('van-tab',{attrs:{\"title\":\"待领优惠券\"}},[(_vm.couponList.length <= 0)?_c('div',{staticClass:\"divDefInfo\",style:({height: _vm.height})},[_c('img',{staticClass:\"imgDefault\",attrs:{\"src\":require(\"@/assets/images/default/card.png\")}}),_c('div',{staticClass:\"divTip\"},[_vm._v(\"暂无优惠券\")])]):_vm._e(),_c('div',{style:({width: '100%', height: _vm.height})},[(_vm.couponList.length > 0)?_c('EasyRefresh',{attrs:{\"userSelect\":false,\"loadMore\":_vm.loadMoreCouponFn,\"onRefresh\":_vm.onRefreshCouponFn},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('ClassicsHeader',{attrs:{\"refreshText\":\"下拉刷新\",\"refreshReadyText\":\"释放刷新\",\"refreshingText\":\"正在刷新\",\"refreshedText\":\"刷新完成\",\"moreInfo\":\"更新于 %T\",\"showMore\":true}})]},proxy:true},{key:\"scrollbar\",fn:function(){return [_c('ClassicsScrollBar',{attrs:{\"color\":\"rgba(0, 0, 0, 0.3)\",\"bgColor\":\"transparent\",\"width\":\"3\",\"radius\":\"2\"}})]},proxy:true},{key:\"footer\",fn:function(){return [_c('ClassicsFooter',{attrs:{\"loadText\":\"上拉加载\",\"loadReadyText\":\"释放加载\",\"loadingText\":\"正在加载\",\"noMoreText\":\"没有更多数据\",\"loadedText\":\"加载完成\",\"moreInfo\":\"更新于 %T\",\"showMore\":\"true\"}})]},proxy:true}],null,false,625780025)},[_c('div',{staticStyle:{\"padding-bottom\":\"25px\"}},_vm._l((_vm.couponList),function(item,index){return _c('div',{key:'coupon_' + index,staticClass:\"couponItem\",class:'bg'+ item.couponType},[_c('van-row',{attrs:{\"type\":\"flex\"}},[_c('van-col',{staticClass:\"one\"},[_c('div',[_vm._v(\"￥\"),_c('span',{staticClass:\"price\"},[_vm._v(_vm._s(_vm._f(\"formatMoneyByDollar\")(item.money))),_c('span',{staticStyle:{\"font-size\":\"12px\"}},[_vm._v(_vm._s(_vm._f(\"formatMoneyByDollar2\")(item.money)))])])]),_c('div',{staticClass:\"type-tips\"},[_vm._v(_vm._s(_vm._f(\"couponType\")(item.couponType)))])]),_c('van-col',{staticClass:\"two\"},[_c('div',{staticClass:\"coupon-name\"},[_vm._v(_vm._s(item.name))]),_c('div',[_vm._v(_vm._s(_vm._f(\"formatDateByFormat\")(item.endTime,'yyyy-MM-dd'))+\" 到期\")]),(item.couponType == 1)?_c('div',[_vm._v(\"原价 ¥\"+_vm._s(_vm._f(\"formatMoney\")(item.price)))]):_vm._e(),(item.couponType == 2)?_c('div',[_c('div',{staticClass:\"divScope\"},[_vm._v(\"仅限于使用 \"+_vm._s(item.scope))]),_c('div',[_vm._v(\"满 \"+_vm._s(_vm._f(\"formatMoney\")(item.accountMoney))+\" 元可用\")])]):_vm._e(),(item.couponType == 3)?_c('div',[_vm._v(\"满 \"+_vm._s(_vm._f(\"formatMoney\")(item.accountMoney))+\" 元可用\")]):_vm._e()]),_c('van-col',{staticClass:\"three\",on:{\"click\":function($event){return _vm.receiveCoupon(item.uuid)}}},[_vm._v(\"领取使用\")])],1)],1)}),0)]):_vm._e()],1)]),_c('van-tab',{staticClass:\"mine\",attrs:{\"title\":\"我的优惠券\"}},[(_vm.dueList.length <= 0)?_c('div',{staticClass:\"divDefInfo\",style:({height: _vm.height})},[_c('img',{staticClass:\"imgDefault\",attrs:{\"src\":require(\"@/assets/images/default/card.png\")}}),_c('div',{staticClass:\"divTip\"},[_vm._v(\"暂无优惠券\")])]):_vm._e(),_c('div',{style:({width: '100%', height: _vm.dueHeight})},[(_vm.couponList.length > 0)?_c('EasyRefresh',{attrs:{\"userSelect\":false,\"loadMore\":_vm.loadMoreDueFn,\"onRefresh\":_vm.onRefreshDueFn},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('ClassicsHeader',{attrs:{\"refreshText\":\"下拉刷新\",\"refreshReadyText\":\"释放刷新\",\"refreshingText\":\"正在刷新\",\"refreshedText\":\"刷新完成\",\"moreInfo\":\"更新于 %T\",\"showMore\":true}})]},proxy:true},{key:\"scrollbar\",fn:function(){return [_c('ClassicsScrollBar',{attrs:{\"color\":\"rgba(0, 0, 0, 0.3)\",\"bgColor\":\"transparent\",\"width\":\"3\",\"radius\":\"2\"}})]},proxy:true},{key:\"footer\",fn:function(){return [_c('ClassicsFooter',{attrs:{\"loadText\":\"上拉加载\",\"loadReadyText\":\"释放加载\",\"loadingText\":\"正在加载\",\"noMoreText\":\"没有更多数据\",\"loadedText\":\"加载完成\",\"moreInfo\":\"更新于 %T\",\"showMore\":\"true\"}})]},proxy:true}],null,false,625780025)},[_c('div',{staticStyle:{\"padding-bottom\":\"20px\"}},_vm._l((_vm.dueList),function(item,index){return _c('div',{key:'due_' + index,staticClass:\"couponItem\",class:'bg'+ item.coupon.couponType},[_c('van-row',{attrs:{\"type\":\"flex\"}},[_c('van-col',{staticClass:\"one\"},[_c('div',[_vm._v(\"￥\"),_c('span',{staticClass:\"price\"},[_vm._v(_vm._s(_vm._f(\"formatMoneyByDollar\")(item.coupon.money))),_c('span',{staticStyle:{\"font-size\":\"12px\"}},[_vm._v(_vm._s(_vm._f(\"formatMoneyByDollar2\")(item.coupon.money)))])])]),_c('div',{staticClass:\"type-tips\"},[_vm._v(_vm._s(_vm._f(\"couponType\")(item.coupon.couponType)))])]),_c('van-col',{staticClass:\"two\"},[_c('div',{staticClass:\"coupon-name\"},[_vm._v(_vm._s(item.coupon.name))]),_c('div',[_vm._v(_vm._s(_vm._f(\"formatDate\")(item.coupon.endTime))+\" 到期\")]),(item.coupon.couponType == 1)?_c('div',[_vm._v(\"原价 ¥\"+_vm._s(_vm._f(\"formatMoney\")(item.coupon.price)))]):_vm._e(),(item.coupon.couponType == 2)?_c('div',[_c('div',{staticClass:\"divScope\"},[_vm._v(\"仅限于使用 \"+_vm._s(item.coupon.scope))]),_c('div',[_vm._v(\"满 \"+_vm._s(_vm._f(\"formatMoney\")(item.coupon.accountMoney))+\" 元可用\")])]):_vm._e(),(item.coupon.couponType == 3)?_c('div',[_vm._v(\"满 \"+_vm._s(_vm._f(\"formatMoney\")(item.coupon.accountMoney))+\" 元可用\")]):_vm._e()]),_c('van-col',{staticClass:\"three\",on:{\"click\":function($event){return _vm.btnUseNow(item.uuid, item.target, item.coupon.couponType)}}},[_vm._v(\"立即使用\")])],1)],1)}),0)]):_vm._e()],1),_c('div',{staticClass:\"nomore\"},[_c('span',[_vm._v(\"无更多优惠券 | \")]),_c('router-link',{staticClass:\"go-link\",attrs:{\"to\":\"/couponFailure\"}},[_vm._v(\"查看已失效>>\")])],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"page couponCenter\">\r\n    <van-tabs>\r\n      <van-tab title=\"待领优惠券\">\r\n        <div v-if=\"couponList.length <= 0\" class=\"divDefInfo\" :style=\"{height: height}\">\r\n          <img src=\"@/assets/images/default/card.png\" class=\"imgDefault\"/>\r\n          <div class=\"divTip\">暂无优惠券</div>\r\n        </div>\r\n        <div :style=\"{width: '100%', height: height}\">\r\n          <EasyRefresh\r\n              v-if=\"couponList.length > 0\"\r\n              :userSelect=\"false\"\r\n              :loadMore=\"loadMoreCouponFn\"\r\n              :onRefresh=\"onRefreshCouponFn\">\r\n              <template v-slot:header>\r\n                  <ClassicsHeader\r\n                      refreshText=\"下拉刷新\"\r\n                      refreshReadyText=\"释放刷新\"\r\n                      refreshingText=\"正在刷新\"\r\n                      refreshedText=\"刷新完成\"\r\n                      moreInfo=\"更新于 %T\"\r\n                      :showMore=\"true\"/>\r\n              </template>\r\n              <template v-slot:scrollbar>\r\n                  <ClassicsScrollBar\r\n                      color=\"rgba(0, 0, 0, 0.3)\"\r\n                      bgColor=\"transparent\"\r\n                      width=\"3\" radius=\"2\"/>\r\n              </template>\r\n              <div style=\"padding-bottom: 25px;\">\r\n                <div class=\"couponItem\" :class=\"'bg'+ item.couponType\" v-for='(item, index) in couponList' :key=\"'coupon_' + index\">\r\n                  <van-row type=\"flex\">\r\n                    <van-col class=\"one\">\r\n                      <div>￥<span class=\"price\">{{item.money | formatMoneyByDollar}}<span style=\"font-size: 12px;\">{{item.money | formatMoneyByDollar2}}</span></span></div>\r\n                      <div class=\"type-tips\">{{item.couponType | couponType}}</div>\r\n                    </van-col>\r\n                    <van-col class=\"two\">\r\n                      <div class=\"coupon-name\">{{item.name}}</div>\r\n                      <div>{{item.endTime | formatDateByFormat('yyyy-MM-dd')}} 到期</div>\r\n                      <div v-if=\"item.couponType == 1\">原价 ¥{{item.price | formatMoney}}</div>\r\n                      <div v-if=\"item.couponType == 2\">\r\n                        <div class=\"divScope\">仅限于使用 {{item.scope}}</div>\r\n                        <div>满 {{item.accountMoney | formatMoney}} 元可用</div>\r\n                      </div>\r\n                      <div v-if=\"item.couponType == 3\">满 {{item.accountMoney | formatMoney}} 元可用</div>\r\n                    </van-col>\r\n                    <van-col class=\"three\" @click=\"receiveCoupon(item.uuid)\">领取使用</van-col>\r\n                  </van-row>\r\n                </div>\r\n              </div>\r\n              <template v-slot:footer>\r\n                  <ClassicsFooter\r\n                      loadText=\"上拉加载\"\r\n                      loadReadyText=\"释放加载\"\r\n                      loadingText=\"正在加载\"\r\n                      noMoreText=\"没有更多数据\"\r\n                      loadedText=\"加载完成\"\r\n                      moreInfo=\"更新于 %T\"\r\n                      showMore=\"true\"/>\r\n              </template>\r\n          </EasyRefresh>\r\n        </div>\r\n      </van-tab>\r\n      <van-tab title=\"我的优惠券\" class=\"mine\">\r\n        <div v-if=\"dueList.length <= 0\" class=\"divDefInfo\" :style=\"{height: height}\">\r\n          <img src=\"@/assets/images/default/card.png\" class=\"imgDefault\"/>\r\n          <div class=\"divTip\">暂无优惠券</div>\r\n        </div>\r\n        <div :style=\"{width: '100%', height: dueHeight}\">\r\n          <EasyRefresh\r\n              v-if=\"couponList.length > 0\"\r\n              :userSelect=\"false\"\r\n              :loadMore=\"loadMoreDueFn\"\r\n              :onRefresh=\"onRefreshDueFn\">\r\n              <template v-slot:header>\r\n                  <ClassicsHeader\r\n                      refreshText=\"下拉刷新\"\r\n                      refreshReadyText=\"释放刷新\"\r\n                      refreshingText=\"正在刷新\"\r\n                      refreshedText=\"刷新完成\"\r\n                      moreInfo=\"更新于 %T\"\r\n                      :showMore=\"true\"/>\r\n              </template>\r\n              <template v-slot:scrollbar>\r\n                  <ClassicsScrollBar\r\n                      color=\"rgba(0, 0, 0, 0.3)\"\r\n                      bgColor=\"transparent\"\r\n                      width=\"3\" radius=\"2\"/>\r\n              </template>\r\n              <div style=\"padding-bottom: 20px;\">\r\n                <div class=\"couponItem\" :class=\"'bg'+ item.coupon.couponType\" v-for='(item, index) in dueList' :key=\"'due_' + index\">\r\n                  <van-row type=\"flex\">\r\n                    <van-col class=\"one\">\r\n                      <div>￥<span class=\"price\">{{item.coupon.money | formatMoneyByDollar}}<span style=\"font-size: 12px;\">{{item.coupon.money | formatMoneyByDollar2}}</span></span></div>\r\n                      <div class=\"type-tips\">{{item.coupon.couponType | couponType}}</div>\r\n                    </van-col>\r\n                    <van-col class=\"two\">\r\n                      <div class=\"coupon-name\">{{item.coupon.name}}</div>\r\n                      <div>{{item.coupon.endTime | formatDate}} 到期</div>\r\n                      <div v-if=\"item.coupon.couponType == 1\">原价 ¥{{item.coupon.price | formatMoney}}</div>\r\n                      <div v-if=\"item.coupon.couponType == 2\">\r\n                        <div class=\"divScope\">仅限于使用 {{item.coupon.scope}}</div>\r\n                        <div>满 {{item.coupon.accountMoney | formatMoney}} 元可用</div>\r\n                      </div>\r\n                      <div v-if=\"item.coupon.couponType == 3\">满 {{item.coupon.accountMoney | formatMoney}} 元可用</div>\r\n                    </van-col>\r\n                    <van-col class=\"three\" @click=\"btnUseNow(item.uuid, item.target, item.coupon.couponType)\">立即使用</van-col>\r\n                  </van-row>\r\n                </div>\r\n              </div>\r\n              <template v-slot:footer>\r\n                  <ClassicsFooter\r\n                      loadText=\"上拉加载\"\r\n                      loadReadyText=\"释放加载\"\r\n                      loadingText=\"正在加载\"\r\n                      noMoreText=\"没有更多数据\"\r\n                      loadedText=\"加载完成\"\r\n                      moreInfo=\"更新于 %T\"\r\n                      showMore=\"true\"/>\r\n              </template>\r\n          </EasyRefresh>\r\n        </div>\r\n        <div class=\"nomore\">\r\n          <span>无更多优惠券 | </span>\r\n          <router-link class=\"go-link\" to='/couponFailure'>查看已失效&gt;&gt;</router-link>\r\n        </div>\r\n      </van-tab>\r\n    </van-tabs>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Dialog, Toast } from 'vant';\r\nimport * as request from '../service/coupons'\r\n\r\nexport default {\r\n  name: 'couponCenter',\r\n  data: () => ({\r\n    height: (window.innerHeight - 46) + 'px',\r\n    dueHeight: (window.innerHeight - 106) + 'px',\r\n    couponList: [],\r\n    couponTotal: 0,\r\n    couponCurrentPage: 1,\r\n    dueList: [],\r\n    dueTotal: 0,\r\n    dueCurrentPage: 1,\r\n  }),\r\n  methods: {\r\n    getCoupons: function(done){\r\n      var that = this;\r\n      request.getCoupons().then((json)=>{\r\n        if(json.code == 200){\r\n          that.couponList = json.data.results;\r\n          that.couponTotal = json.data.count;\r\n          that.couponCurrentPage = 1;\r\n          if(done != undefined){ done(); }\r\n        }\r\n      });\r\n    },\r\n    getUserCoupons: function(done){\r\n      var that = this;\r\n      request.getUserCoupons({type: 'due'}).then((json)=>{\r\n        if(json.code == 200){\r\n          that.dueList = json.data.results;\r\n          that.dueTotal = json.data.count;\r\n          that.dueCurrentPage = 1;\r\n          if(done != undefined){ done(); }\r\n        }\r\n      });\r\n    },\r\n    receiveCoupon: function(uuid){\r\n      var that = this;\r\n      request.postUserCoupons({couponsUuid: uuid}).then((json)=>{\r\n        if(json.code == 200){\r\n          Toast('优惠券领取成功。');\r\n          that.getCoupons(); that.getUserCoupons();\r\n        }\r\n      });\r\n    },\r\n    btnUseNow(uuid, target, couponType){\r\n      if(couponType == 1){\r\n        if(target != null){\r\n          this.$router.push('/course/' + target);\r\n        }\r\n      }else {\r\n        this.$router.push('/couponList/' + uuid);\r\n      }\r\n    },\r\n    loadMoreCouponFn: function (done) {\r\n      if(this.couponList.length < this.couponTotal){\r\n        var that = this; this.couponCurrentPage++;\r\n        request.getCoupons({page: this.couponCurrentPage}).then((json) => {\r\n          if(json.code == 200){\r\n            that.couponTotal = json.data.count;\r\n            json.data.results.map((item, index)=>{\r\n              that.couponList.push(item);\r\n            });\r\n            done(false);\r\n          }\r\n        });\r\n      }else {\r\n        Toast('没有数据'); done(false);\r\n      }\r\n    },\r\n    onRefreshCouponFn: function (done) {\r\n      this.getCoupons(done);\r\n    },\r\n    loadMoreDueFn: function (done) {\r\n      if(this.dueList.length < this.dueTotal){\r\n        var that = this; this.dueCurrentPage++;\r\n        request.getUserCoupons({type: 'due', page: this.dueCurrentPage}).then((json) => {\r\n          if(json.code == 200){\r\n            that.dueTotal = json.data.count;\r\n            json.data.results.map((item, index)=>{\r\n              that.dueList.push(item);\r\n            });\r\n            done(false);\r\n          }\r\n        });\r\n      }else {\r\n        Toast('没有数据'); done(false);\r\n      }\r\n    },\r\n    onRefreshDueFn: function (done) {\r\n      this.getUserCoupons(done);\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getCoupons(); this.getUserCoupons();\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n  .couponCenter{\r\n    overflow-x: hidden;\r\n    background-color: #F7F7F7;\r\n    .van-tabs__nav{\r\n      width: 100%;\r\n      height: 29px;\r\n      position: fixed;\r\n      top:0;\r\n      left: 0;\r\n    }\r\n    .van-tabs__content{\r\n      padding-bottom: 70px!important;\r\n    }\r\n    .van-tab span{\r\n      color: #999 !important;\r\n      font-size:15px;\r\n    }\r\n    .van-tabs .van-tab--active .van-ellipsis{\r\n      color:#F9626A !important;\r\n\r\n    }\r\n    .van-tabs__line{\r\n      width: 30px!important;\r\n      background-color: #F9626A;\r\n      border-radius: 10px!important;\r\n      bottom: 0!important;\r\n    }\r\n    .couponItem{\r\n      width: calc(100% - 40px);\r\n      height: 102px;\r\n      margin: 10px 20px 0;\r\n      font-size: 12px;\r\n      .one{\r\n        width: 90px;\r\n        margin: 35px 10px 0 0;\r\n        text-align:center;\r\n        .price{\r\n          font-size: 26px;\r\n        }\r\n        .type-tips{\r\n          margin-top: 10px;\r\n        }\r\n      }\r\n      .two{\r\n        width: calc(100% - 150px);\r\n        margin: 20px 10px;\r\n        line-height: 22px;\r\n        color: #999999;\r\n        .coupon-name{\r\n          font-size: 18px;\r\n          font-weight:bold;\r\n          color:#000000;\r\n          text-overflow:ellipsis;\r\n          overflow: hidden;\r\n          white-space: nowrap;\r\n        }\r\n      }\r\n      .three{\r\n        width: 20px;\r\n        margin: 10px;\r\n        line-height: 20px;\r\n        color: #F9626A;\r\n        font-size: 14px;\r\n        vertical-align: middle;\r\n        font-weight: bold;\r\n      }\r\n    }\r\n    .bg1{\r\n      background: url('~@/assets/images/coupon/couponbg1.png') no-repeat;\r\n      background-size: contain;\r\n      .type-tips{\r\n        color: #767363;\r\n      }\r\n    }\r\n    .bg2{\r\n      .one {\r\n        color: #fff;\r\n      }\r\n      background: url('~@/assets/images/coupon/couponbg2.png') no-repeat;\r\n      background-size: contain;\r\n    }\r\n    .bg3{\r\n      .one {\r\n        color: #fff;\r\n      }\r\n      background: url('~@/assets/images/coupon/couponbg3.png') no-repeat;\r\n      background-size: contain;\r\n    }\r\n    .nomore{\r\n      width: 100%;\r\n      height: 20px;\r\n      line-height: 20px;\r\n      padding: 20px;\r\n      font-size: 12px;\r\n      color: #999999;\r\n      background: #F7F7F7;\r\n      text-align: center;\r\n      position: fixed;\r\n      bottom: 0px;\r\n      left: 0;\r\n      .go-link{\r\n        color: #2F8DFB;\r\n      }\r\n    }\r\n  }\r\n  .divScope{\r\n    line-height: 12px;\r\n    margin-top: 3px;\r\n  }\r\n  .divDefInfo{\r\n    display: flex; align-items: center;\r\n    justify-content: center; flex-direction: column;\r\n    margin-top: -30px;\r\n  }\r\n  .divDefInfo .imgDefault{\r\n    width: 160px;\r\n  }\r\n  .divDefInfo .divTip{\r\n    font-size: 14px; color: #999999;\r\n    margin-top: -15px;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CouponCenter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CouponCenter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CouponCenter.vue?vue&type=template&id=66465c72&\"\nimport script from \"./CouponCenter.vue?vue&type=script&lang=js&\"\nexport * from \"./CouponCenter.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CouponCenter.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/card.1a3fb92c.png\";"],"sourceRoot":""}