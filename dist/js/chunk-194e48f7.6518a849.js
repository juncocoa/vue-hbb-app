(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-194e48f7"],{"30d4":function(t,e,i){"use strict";var n=i("3edd"),s=i.n(n);s.a},"3edd":function(t,e,i){},5592:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"page",staticStyle:{"background-color":"#F7F7F7"}},[1==t.stepNum?i("div",{staticClass:"divSetPwd"},[i("div",{staticStyle:{"background-color":"#FFF",height:"264px"}},[t._m(0),i("div",{staticClass:"divPwd"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",maxlength:"16",placeholder:"请填写旧密码",autocomplete:"off"},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}})])]),i("van-button",{staticClass:"btnLogin",attrs:{color:"#FF6B88",disabled:!t.verifyOld,block:""},on:{click:t.stepNext}},[t._v("下一步")])],1):t._e(),2==t.stepNum?i("div",{staticClass:"divSetPwd"},[i("div",{staticStyle:{"background-color":"#FFF",height:"264px"}},[t._m(1),i("div",{staticClass:"divPhone"},[i("div",{staticClass:"divTitle"},[t._v("+86")]),i("input",{directives:[{name:"model",rawName:"v-model",value:t.tel,expression:"tel"}],attrs:{type:"tel",maxlength:"11",placeholder:"输入手机号",autocomplete:"off"},domProps:{value:t.tel},on:{input:function(e){e.target.composing||(t.tel=e.target.value)}}})]),i("div",{staticClass:"divCode"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],attrs:{type:"tel",maxlength:"6",placeholder:"请输入验证码",autocomplete:"off"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}}),i("div",{staticClass:"divGetVerifCode",on:{click:t.clientSendCode}},[t._v(t._s(t.txtCode))])])]),i("van-button",{staticClass:"btnLogin",attrs:{color:"#FF6B88",disabled:!t.verify,block:""},on:{click:t.submitPwd}},[t._v("确认更换")])],1):t._e()])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"divTip"},[i("div",{staticClass:"divTitle"},[t._v("安全验证")]),i("div",{staticClass:"divContent"},[t._v("为保证账户安全，请您完成身份验证")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"divTip"},[i("div",{staticClass:"divTitle"},[t._v("输入新手机号")]),i("div",{staticClass:"divContent"},[t._v("更换手机号后，您需要使用新的手机号登录")])])}],a=(i("a481"),i("e7e5"),i("d399")),o=(i("e17f"),i("2241")),r=i("7884"),c={name:"SwitchPhone",data:function(){return{stepNum:1,tel:"",code:"",password:"",interval:0,speed:120,txtCode:"获取验证码"}},computed:{verifyOld:function(){return this.password},verify:function(){return this.tel&&this.code},verifyTel:function(){return!/^1[3456789]\d{9}$/.test(this.tel)},verifyCode:function(){return 6!=this.code.length},verifyPassword:function(){return!(this.password.length>=6&&this.password.length<=16)}},methods:{stepNext:function(t){if(this.verifyPassword)o["a"].alert({message:"密码必须 6 到 16 位。"});else{var e={type:"pwd",tel:this.$route.params.tel,password:this.password},i=this;r["e"](e).then((function(t){200==t.code&&(sessionStorage.setItem("token",t.data.token),i.stepNum=2,Object(a["a"])("密码验证成功"))}))}},clientSendCode:function(t){if("获取验证码"==this.txtCode){if(this.verifyTel)return void o["a"].alert({message:"手机号格式错误！"});var e=this;r["g"]({tel:this.tel}).then((function(t){200==t.code&&(o["a"].alert({message:t.msg}),e.interval=setInterval((function(){e.speed>0?e.txtCode=e.speed--+"s后再次发送":(clearInterval(e.interval),e.speed=120,e.txtCode="获取验证码")}),1e3))}))}},submitPwd:function(t){if(this.verifyTel)o["a"].alert({message:"手机号格式错误！"});else if(this.verifyCode)o["a"].alert({message:"验证码必须 6 位数。"});else{var e={tel:this.tel,code:this.code},i=this;r["d"](e).then((function(t){200==t.code&&(Object(a["a"])(t.msg),i.$router.replace("/myProfile"))}))}}}},d=c,l=(i("30d4"),i("2877")),u=Object(l["a"])(d,n,s,!1,null,"5af5915c",null);e["default"]=u.exports},7884:function(t,e,i){"use strict";i.d(e,"e",(function(){return s})),i.d(e,"f",(function(){return a})),i.d(e,"g",(function(){return o})),i.d(e,"i",(function(){return r})),i.d(e,"c",(function(){return d})),i.d(e,"d",(function(){return l})),i.d(e,"b",(function(){return c})),i.d(e,"h",(function(){return u})),i.d(e,"a",(function(){return p})),i.d(e,"j",(function(){return v}));var n=i("5724"),s=function(t){return n["a"].post("/api/client/login/",t)},a=function(t){return n["a"].post("/api/client/register/",t)},o=function(t){return n["a"].post("/api/client/sendcode/",t)},r=function(t){return n["a"].post("/api/client/wechatlogin/",t)},c=function(t){return n["a"].post("/api/client/bindtel/",t)},d=function(t){return n["a"].post("/api/client/changepwd/",t)},l=function(t){return n["a"].post("/api/client/changetel/",t)},u=function(){return n["a"].get("/api/client/userInfo/")},p=function(t){return n["a"].post("/api/client/bindwechat/",t)},v=function(t){return n["a"].post("/api/client/querytel/",t)}}}]);
//# sourceMappingURL=chunk-194e48f7.6518a849.js.map