{"version":3,"sources":["webpack:///./src/service/coupons.js","webpack:///./src/views/CouponFailure.vue?4531","webpack:///src/views/CouponFailure.vue","webpack:///./src/views/CouponFailure.vue?b5b2","webpack:///./src/views/CouponFailure.vue","webpack:///./src/assets/images/default/card.png","webpack:///./src/views/CouponFailure.vue?b5bb"],"names":["getCoupons","data","service","get","getUserCoupons","postUserCoupons","post","getCouponsCourse","render","_vm","this","_h","$createElement","_c","_self","staticClass","couponList","length","style","height","attrs","_v","_e","loadMoreFn","scopedSlots","_u","key","fn","proxy","staticStyle","_l","item","index","_s","_f","coupon","money","name","endTime","couponType","price","scope","accountMoney","staticRenderFns","methods","initiData","that","json","results","couponTotal","count","couponCurrentPage","map","push","done","mounted","component","module","exports"],"mappings":"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","file":"js/chunk-3f762e67.4287ff8c.js","sourcesContent":["import { service } from './http';\r\n\r\nconst getCoupons = (data) => service.get('/api/client/coupons/', data) //优惠券列表\r\nconst getUserCoupons = (data) => service.get('/api/client/userCoupons/', data) //用户优惠券列表\r\nconst postUserCoupons = (data) => service.post('/api/client/userCoupons/', data) //领用优惠券\r\nconst getCouponsCourse = (data) => service.get('/api/client/couponsCourse/', data) //品类券、通用券可用课程\r\n\r\nexport {\r\n  getCoupons,\r\n  getUserCoupons,\r\n  postUserCoupons,\r\n  getCouponsCourse\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page couponFailure\"},[(_vm.couponList.length <= 0)?_c('div',{staticClass:\"divDefInfo\",style:({height: _vm.height})},[_c('img',{staticClass:\"imgDefault\",attrs:{\"src\":require(\"@/assets/images/default/card.png\")}}),_c('div',{staticClass:\"divTip\"},[_vm._v(\"暂无优惠券\")])]):_vm._e(),(_vm.couponList.length > 0)?_c('EasyRefresh',{attrs:{\"userSelect\":false,\"loadMore\":_vm.loadMoreFn},scopedSlots:_vm._u([{key:\"header\",fn:function(){return [_c('ClassicsHeader',{attrs:{\"refreshText\":\"下拉刷新\",\"refreshReadyText\":\"释放刷新\",\"refreshingText\":\"正在刷新\",\"refreshedText\":\"刷新完成\",\"moreInfo\":\"更新于 %T\",\"showMore\":true}})]},proxy:true},{key:\"scrollbar\",fn:function(){return [_c('ClassicsScrollBar',{attrs:{\"color\":\"rgba(0, 0, 0, 0.3)\",\"bgColor\":\"transparent\",\"width\":\"3\",\"radius\":\"2\"}})]},proxy:true},{key:\"footer\",fn:function(){return [_c('ClassicsFooter',{attrs:{\"loadText\":\"上拉加载\",\"loadReadyText\":\"释放加载\",\"loadingText\":\"正在加载\",\"noMoreText\":\"没有更多数据\",\"loadedText\":\"加载完成\",\"moreInfo\":\"更新于 %T\",\"showMore\":\"true\"}})]},proxy:true}],null,false,625780025)},[_c('div',{staticStyle:{\"padding-bottom\":\"15px\"}},_vm._l((_vm.couponList),function(item,index){return _c('div',{key:index,staticClass:\"couponItem bg0\"},[_c('van-row',{attrs:{\"type\":\"flex\"}},[_c('van-col',{staticClass:\"one\"},[_c('div',[_vm._v(\"￥\"),_c('span',{staticClass:\"price\"},[_vm._v(_vm._s(_vm._f(\"formatMoneyByDollar\")(item.coupon.money))),_c('span',{staticStyle:{\"font-size\":\"12px\"}},[_vm._v(_vm._s(_vm._f(\"formatMoneyByDollar2\")(item.coupon.money)))])])]),_c('div',{staticClass:\"type-tips\"},[_vm._v(\"已过期\")])]),_c('van-col',{staticClass:\"two\"},[_c('div',{staticClass:\"coupon-name\"},[_vm._v(_vm._s(item.coupon.name))]),_c('div',[_vm._v(_vm._s(_vm._f(\"formatDateByFormat\")(item.coupon.endTime,'yyyy-MM-dd'))+\" 到期\")]),(item.coupon.couponType == 1)?_c('div',[_vm._v(\"原价 ¥\"+_vm._s(_vm._f(\"formatMoney\")(item.coupon.price)))]):_vm._e(),(item.coupon.couponType == 2)?_c('div',[_c('div',{staticClass:\"divScope\"},[_vm._v(\"仅限于使用 \"+_vm._s(item.coupon.scope))]),_c('div',[_vm._v(\"满 \"+_vm._s(_vm._f(\"formatMoney\")(item.coupon.accountMoney))+\" 元可用\")])]):_vm._e(),(item.coupon.couponType == 3)?_c('div',[_vm._v(\"满 \"+_vm._s(_vm._f(\"formatMoney\")(item.coupon.accountMoney))+\" 元可用\")]):_vm._e()]),_c('van-col',{staticClass:\"three\"},[_vm._v(\"已失效\")])],1)],1)}),0)]):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"page couponFailure\">\r\n    <div v-if=\"couponList.length <= 0\" class=\"divDefInfo\" :style=\"{height: height}\">\r\n      <img src=\"@/assets/images/default/card.png\" class=\"imgDefault\"/>\r\n      <div class=\"divTip\">暂无优惠券</div>\r\n    </div>\r\n    <EasyRefresh\r\n        v-if=\"couponList.length > 0\"\r\n        :userSelect=\"false\"\r\n        :loadMore=\"loadMoreFn\">\r\n        <template v-slot:header>\r\n            <ClassicsHeader\r\n                refreshText=\"下拉刷新\"\r\n                refreshReadyText=\"释放刷新\"\r\n                refreshingText=\"正在刷新\"\r\n                refreshedText=\"刷新完成\"\r\n                moreInfo=\"更新于 %T\"\r\n                :showMore=\"true\"/>\r\n        </template>\r\n        <template v-slot:scrollbar>\r\n            <ClassicsScrollBar\r\n                color=\"rgba(0, 0, 0, 0.3)\"\r\n                bgColor=\"transparent\"\r\n                width=\"3\" radius=\"2\"/>\r\n        </template>\r\n        <div style=\"padding-bottom: 15px;\">\r\n          <div class=\"couponItem bg0\" v-for='(item,index) in couponList' :key='index'>\r\n            <van-row type=\"flex\">\r\n              <van-col class=\"one\">\r\n                <div>￥<span class=\"price\">{{item.coupon.money | formatMoneyByDollar}}<span style=\"font-size: 12px;\">{{item.coupon.money | formatMoneyByDollar2}}</span></span></div>\r\n                <div class=\"type-tips\">已过期</div>\r\n              </van-col>\r\n              <van-col class=\"two\">\r\n                <div class=\"coupon-name\">{{item.coupon.name}}</div>\r\n                <div>{{item.coupon.endTime | formatDateByFormat('yyyy-MM-dd')}} 到期</div>\r\n                <div v-if=\"item.coupon.couponType == 1\">原价 ¥{{item.coupon.price | formatMoney}}</div>\r\n                <div v-if=\"item.coupon.couponType == 2\">\r\n                  <div class=\"divScope\">仅限于使用 {{item.coupon.scope}}</div>\r\n                  <div>满 {{item.coupon.accountMoney | formatMoney}} 元可用</div>\r\n                </div>\r\n                <div v-if=\"item.coupon.couponType == 3\">满 {{item.coupon.accountMoney | formatMoney}} 元可用</div>\r\n              </van-col>\r\n              <van-col class=\"three\">已失效</van-col>\r\n            </van-row>\r\n          </div>\r\n        </div>\r\n        <template v-slot:footer>\r\n            <ClassicsFooter\r\n                loadText=\"上拉加载\"\r\n                loadReadyText=\"释放加载\"\r\n                loadingText=\"正在加载\"\r\n                noMoreText=\"没有更多数据\"\r\n                loadedText=\"加载完成\"\r\n                moreInfo=\"更新于 %T\"\r\n                showMore=\"true\"/>\r\n        </template>\r\n    </EasyRefresh>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { Row, Col, Toast } from 'vant';\r\nimport * as request from '../service/coupons'\r\n\r\nexport default {\r\n  name: 'couponFailure',\r\n  data: () => ({\r\n    height: (window.innerHeight - 58) + 'px',\r\n    couponList: [],\r\n    couponTotal: 0,\r\n    couponCurrentPage: 1,\r\n  }),\r\n  methods: {\r\n    initiData: function (done) {\r\n      var that = this;\r\n      request.getUserCoupons({type: 'overdue'}).then((json)=>{\r\n        if(json.code == 200){\r\n          that.couponList = json.data.results;\r\n          that.couponTotal = json.data.count;\r\n          that.couponCurrentPage = 1;\r\n          if(done != undefined){ done(); }\r\n        }\r\n      })\r\n    },\r\n    loadMoreFn: function (done) {\r\n      if(this.couponList.length < this.couponTotal){\r\n        var that = this; this.couponCurrentPage++;\r\n        request.getUserCoupons({type: 'overdue', page: this.couponCurrentPage}).then((json) => {\r\n          if(json.code == 200){\r\n            that.couponTotal = json.data.count;\r\n            json.data.results.map((item, index)=>{\r\n              that.couponList.push(item);\r\n            });\r\n            done(false);\r\n          }\r\n        });\r\n      }else {\r\n        Toast('没有数据'); done(false);\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    this.initiData();\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\">\r\n  .couponFailure{\r\n    overflow-x: hidden;\r\n    background-color: #F7F7F7;\r\n    .couponItem{\r\n      width: calc(100% - 40px);\r\n      height: 102px;\r\n      margin: 10px 20px 0;\r\n      font-size: 12px;\r\n      .one{\r\n        width: 90px;\r\n        margin: 35px 10px 0 0;\r\n        text-align:center;\r\n        .price{\r\n          font-size: 26px;\r\n        }\r\n        .type-tips{\r\n          margin-top: 10px;\r\n          color: #999999;\r\n        }\r\n      }\r\n      .two{\r\n        width: calc(100% - 150px);\r\n        margin: 20px 10px;\r\n        line-height: 22px;\r\n        color: #999999;\r\n        .coupon-name{\r\n          font-size: 18px;\r\n          font-weight:bold;\r\n          color:#000000;\r\n          text-overflow:ellipsis;\r\n          overflow: hidden;\r\n          white-space: nowrap;\r\n        }\r\n      }\r\n      .three{\r\n        width: 20px;\r\n        margin: 18px 10px;\r\n        line-height: 20px;\r\n        color: #999;\r\n        font-size: 14px;\r\n        vertical-align: middle;\r\n        font-weight: bold;\r\n      }\r\n    }\r\n    .bg0{\r\n      background: url('~@/assets/images/coupon/couponbg0.png') no-repeat;\r\n      background-size: contain;\r\n    }\r\n  }\r\n  .divDefInfo{\r\n    display: flex; align-items: center;\r\n    justify-content: center; flex-direction: column;\r\n    margin-top: -30px;\r\n  }\r\n  .divDefInfo .imgDefault{\r\n    width: 160px;\r\n  }\r\n  .divDefInfo .divTip{\r\n    font-size: 14px; color: #999999;\r\n    margin-top: -15px;\r\n  }\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CouponFailure.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CouponFailure.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./CouponFailure.vue?vue&type=template&id=0c137cfc&\"\nimport script from \"./CouponFailure.vue?vue&type=script&lang=js&\"\nexport * from \"./CouponFailure.vue?vue&type=script&lang=js&\"\nimport style0 from \"./CouponFailure.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/card.1a3fb92c.png\";","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CouponFailure.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./CouponFailure.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}